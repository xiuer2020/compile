(function(t){function e(e){for(var r,i,o=e[0],c=e[1],l=e[2],g=0,h=[];g<o.length;g++)i=o[g],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&h.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},s={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"09bf":function(t,e,n){},1171:function(t,e,n){"use strict";var r=n("7339"),s=n.n(r);s.a},"3b36":function(t,e,n){"use strict";var r=n("496c"),s=n.n(r);s.a},"3c14":function(t,e,n){},4419:function(t,e,n){"use strict";var r=n("d614"),s=n.n(r);s.a},"496c":function(t,e,n){},"4c30":function(t,e,n){},"566c":function(t,e,n){t.exports=n.p+"img/playing.ab1993a5.svg"},"56d7":function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),s=n("bc3a"),a=n.n(s);a.a.defaults.baseURL="http://music.kele8.cn",a.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",a.a.defaults.withCredentials=!1,a.a.defaults.transformRequest=[function(t,e){return t}],a.a.interceptors.request.use(t=>{if("post"==t.method){let e="";for(let n in t.data)e+=n+"="+t.data[n]+"&";e=e.slice(0,-1),t.data=e}return t}),r["a"].prototype.axios=a.a,Window.axios=a.a;var i=n("8c4f"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("PlayBar"),n("LoadingComp"),n("HomeLink"),n("div",{staticClass:"personalized"},[n("CardTitle",[t._v("推荐歌单")]),n("ul",{staticClass:"songList"},t._l(t.slicePersonalizeds,(function(t,e){return n("SongListCard",{key:e,attrs:{songList:t}})})),1)],1),n("div",{staticClass:"newsong"},[n("cardTitle",[t._v("推荐音乐")]),n("ul",t._l(t.newsongs,(function(t,e){return n("SongItem",{key:e,attrs:{songItem:t,showNumber:!1}})})),1)],1),n("PageBase")],1)},c=[];class l{init(t,e,n,r=""){let s=JSON.parse(window.localStorage.getItem(`${t}${r}`));s&&s.expires>Date.now()?e():n()}parse(t,e=""){return JSON.parse(window.localStorage.getItem(`${t}${e}`)).data}}var u=new l,g={home:{newSongList:"/personalized",newSongs:"/personalized/newsong"},playList:{playListDetail:"/playlist/detail"},lyric:{lyric:"/lyric"},hot:{hotSongs:"/top/list?idx=1"}},h=n("2f62"),d={UPDATE:"UPDATE"},m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.currentSongList.length,expression:"currentSongList.length !== 0"}],staticClass:"play-bar"},[n("div",{staticClass:"left",on:{click:function(e){return e.stopPropagation(),t.toLyricPage(t.lyricPage)}}},[n("div",{staticClass:"play-bar-img",class:{active:t.playing}},[n("img",{attrs:{src:t.currentSongPicUrl}})]),n("div",{staticClass:"song-introduce-box"},[n("div",{staticClass:"song-name"},[t._v(t._s(t.currentSong.name))]),n("div",{staticClass:"song-artist"},[t._v(t._s(t.joinArtists(t.currentSongArtists)))])])]),n("div",{staticClass:"right"},[n("div",{staticClass:"control",on:{click:function(e){return e.stopPropagation(),t.UPDATE({key:"playing",value:!t.playing})}}},[n("canvas",{attrs:{width:"36",height:"36",id:"canvas"}}),t.playing?n("i",{staticClass:"fa fa-pause"}):n("i",{staticClass:"fa fa-play"})]),n("i",{staticClass:"fa fa-list-alt list",on:{click:function(e){return e.stopPropagation(),t.UPDATE({key:"showCurrentSongList",value:!t.showCurrentSongList,name:"playBar"})}}})]),t.showCurrentSongList?[n("div",{staticClass:"mask",on:{click:function(e){return t.UPDATE({key:"showCurrentSongList",value:!1,name:"playBar"})}}}),n("div",{staticClass:"current-song-list-box"},[n("ul",{staticClass:"current-song-list"},t._l(t.currentSongList,(function(t,e){return n("SongItem",{key:e,attrs:{songItem:t,number:e,showNumber:!0}})})),1)])]:t._e()],2)},p=[],y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"song-item",on:{click:function(e){return e.stopPropagation(),t.switchCurrentSong(t.songItem)}}},[r("div",{staticClass:"left"},[r("div",{staticClass:"song-introduction-box"},[t.showNumber?r("div",{staticClass:"song-number",class:{active:t.number<3}},[t._v(t._s(t.numberComputed))]):t._e(),r("div",{staticClass:"song-introduction"},[r("div",{staticClass:"song-name"},[t._v(" "+t._s(t.songItem.name)+" "),t._v(" "+t._s(t.songAlia)+" ")]),r("div",{staticClass:"song-artists"},[t._v(t._s(t.songItemArtists))])])])]),r("div",{staticClass:"right"},[t.currentSong.id===t.songItem.id&&t.playing?r("img",{staticClass:"icon icon-play",staticStyle:{background:"none"},attrs:{src:n("566c"),alt:""}}):r("i",{staticClass:"fa fa-play-circle-o"})])])},f=[],v={name:"SongItem",props:{number:{type:Number,default:0},songItem:{type:Object,default:()=>({})},showNumber:{type:Boolean,default:!1}},computed:{...Object(h["e"])(["currentSong","err","playing","currentSongList"]),numberComputed:function(){return this.number<9?"0"+(this.number+1):this.number+1},songItemArtists:function(){return this.songItem.song?this.songItem.song.artists.map(t=>t.name).join("/"):this.songItem.ar?this.songItem.ar.map(t=>t.name).join("/"):""},songAlia:function(){return this.songItem.alia?this.songItem.alia.join("-"):""}},methods:{...Object(h["d"])([d.UPDATE]),...Object(h["b"])({["action"+d.UPDATE]:""+d.UPDATE}),switchCurrentSong:function(t){this.UPDATE({key:"currentSong",value:t}),this.UPDATE({key:"currentSongListIndex",value:-1}),this.currentSong.id===t.id?this.UPDATE({key:"playing",value:!this.playing}):this.UPDATE({key:"playing",value:!0});let e=this.currentSongList.filter(e=>!!e&&e.id!==t.id);this.UPDATE({key:"currentSongList",value:[...e,this.currentSong]})}}},S=v,L=(n("5b1d"),n("2877")),P=Object(L["a"])(S,y,f,!1,null,"3acc5e78",null),b=P.exports,D={name:"playBar",components:{SongItem:b},computed:{...Object(h["e"])("playBar",["showCurrentSongList"]),...Object(h["e"])(["currentSong","playing","err","showLoading","currentSongList","currentSongListIndex","lyricPage"]),...Object(h["c"])(["currentSongPicUrl","currentSongArtists","currentSongDuration"]),...Object(h["c"])("playBar",["compileLlyrics"])},methods:{...Object(h["d"])([d.UPDATE]),...Object(h["b"])({["action"+d.UPDATE]:""+d.UPDATE}),toLyricPage(t){t?this.$router.push("lyric"):this.$router.push("control")},joinArtists:function(t){return t.map(t=>t.name).join("/")}},mounted(){var t=this.$el.querySelector("#canvas"),e=this.$root.$el.querySelector("audio"),n=t.getContext("2d");e.ontimeupdate=()=>{n.clearRect(0,0,36,36),n.beginPath(),n.arc(18,18,17,0,2*Math.PI),n.closePath(),n.strokeStyle="gray",n.lineWidth="1",n.stroke(),n.closePath(),n.beginPath(),n.arc(18,18,17,-.5*Math.PI,-.5*Math.PI+2*Math.PI*(1e3*e.currentTime/this.currentSongDuration)),n.strokeStyle="rgba(255,0,0,0.7)",n.lineWidth="1",n.stroke(),1e3*(e.currentTime+2)>=this.currentSongDuration&&(this.currentSongListIndex!==this.currentSongList.length-1?this.UPDATE({key:"currentSongListIndex",value:this.currentSongListIndex+1}):this.UPDATE({key:"currentSongListIndex",value:0}),this.UPDATE({key:"currentSong",value:this.currentSongList[this.currentSongListIndex]}),1===this.currentSongList.length&&this.UPDATE({key:"playing",value:!1}))}},destroyed(){var t=this.$root.$el.querySelector("audio");t.ontimeupdate=null}},k=D,U=(n("dcb5"),Object(L["a"])(k,m,p,!1,null,"c3dfb418",null)),E=U.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{attrs:{id:"nav"}},[n("li",[n("router-link",{attrs:{to:"/"}},[t._v("推荐音乐")])],1),n("li",[n("router-link",{attrs:{to:"/hot"}},[t._v("热歌榜")])],1),n("li",[n("router-link",{attrs:{to:"/search"}},[t._v("搜索")])],1)])},A=[],C={},_=C,w=(n("caca"),Object(L["a"])(_,T,A,!1,null,"320a7c58",null)),x=w.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[t._t("default")],2)},O=[],j={},$=j,N=(n("6171"),Object(L["a"])($,I,O,!1,null,"5eebda7a",null)),B=N.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"card",on:{click:function(e){return t.$router.push({path:"playlist",query:{id:t.songList.id}})}}},[n("div",{staticClass:"thumb"},[n("img",{attrs:{src:t.songList.picUrl,alt:""}}),n("span",[n("i",{staticClass:"fa fa-headphones"}),t._v(" "+t._s(t.playCountParse(t.songList.playCount))+" ")])]),n("h5",[t._v(t._s(t.songList.name))])])},q=[],z={props:{songList:{type:Object,required:!0,default:()=>({})}},methods:{playCountParse:function(t){return t>1e8?(t/1e8).toFixed(1)+"亿":t>1e4?(t/1e4).toFixed(1)+"万":void 0}}},V=z,X=(n("ac5a"),Object(L["a"])(V,H,q,!1,null,null,null)),J=X.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showLoading?r("div",{staticClass:"loading"},[r("img",{attrs:{src:n("afd7"),alt:""}})]):t._e()},M=[],R={computed:{...Object(h["e"])(["showLoading"])}},G=R,W=(n("3b36"),Object(L["a"])(G,F,M,!1,null,"e0ca73e8",null)),Y=W.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-base"},[t._v(" 底部 ")])},Q=[],Z={},tt=Z,et=(n("f000"),Object(L["a"])(tt,K,Q,!1,null,"478a5411",null)),nt=et.exports,rt={name:"home",components:{PlayBar:E,HomeLink:x,CardTitle:B,SongListCard:J,SongItem:b,LoadingComp:Y,PageBase:nt},computed:{...Object(h["e"])(["currentSong"]),...Object(h["e"])("home",["personalizeds","newsongs"]),...Object(h["c"])("home",["slicePersonalizeds"]),...Object(h["e"])(["err","PlayBarShow","showLoading"])},methods:{...Object(h["d"])([""+d.UPDATE]),...Object(h["b"])({["action"+d.UPDATE]:""+d.UPDATE})},created(){u.init("personalizeds",()=>{this.UPDATE({key:"personalizeds",value:u.parse("personalizeds"),name:"home"})},()=>{this.UPDATE({key:"showLoading",value:!0}),this.axios.get(g.home.newSongList).then(t=>{this.UPDATE({key:"personalizeds",value:t.data.result,name:"home"}),localStorage.setItem("personalizeds",JSON.stringify({expires:Date.now()+6e5,data:t.data.result})),this.UPDATE({key:"showLoading",value:!1})}).catch(t=>{this.UPDATE({key:"err",value:t})})}),u.init("newsongs",()=>{this.UPDATE({key:"newsongs",value:u.parse("newsongs"),name:"home"})},()=>{this.UPDATE({key:"showLoading",value:!0}),this.axios.get(g.home.newSongs).then(t=>{this.UPDATE({key:"newsongs",value:t.data.result,name:"home"}),localStorage.setItem("newsongs",JSON.stringify({expires:Date.now()+6e5,data:t.data.result})),this.UPDATE({key:"showLoading",value:!1})}).catch(t=>{this.UPDATE({key:"err",value:t})})})}},st=rt,at=(n("81d6"),Object(L["a"])(st,o,c,!1,null,"160101c5",null)),it=at.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hot"},[n("PlayBar"),n("HomeLink"),n("LoadingComp"),t._m(0),n("ul",{staticClass:"songItem-innter-layout"},t._l(t.hotSongListDetail,(function(t,e){return n("SongItem",{key:e,attrs:{songItem:t,number:e,showNumber:!0}})})),1),n("PageBase")],1)},ct=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"poster"},[n("div",{staticClass:"poster-content"})])}],lt={name:"Hot",components:{HomeLink:x,SongItem:b,LoadingComp:Y,PageBase:nt,PlayBar:E},computed:{...Object(h["e"])(["err","currentSong"]),...Object(h["e"])("hot",["hotSongListDetail"])},methods:{...Object(h["d"])([""+d.UPDATE]),...Object(h["b"])({["action"+d.UPDATE]:""+d.UPDATE})},created(){u.init("hotSongListDetail",()=>{this.UPDATE({key:"hotSongListDetail",value:u.parse("hotSongListDetail"),name:"hot"})},()=>{this.UPDATE({key:"showLoading",value:!0}),this.axios.get(g.hot.hotSongs).then(t=>{this.UPDATE({key:"hotSongListDetail",value:t.data.playlist.tracks,name:"hot"}),localStorage.setItem("hotSongListDetail",JSON.stringify({expires:Date.now()+6e5,data:t.data.playlist.tracks})),this.UPDATE({key:"showLoading",value:!1})}).catch(t=>{this.UPDATE({key:"err",value:t})})})}},ut=lt,gt=(n("4419"),Object(L["a"])(ut,ot,ct,!1,null,null,null)),ht=gt.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Search"},[t.currentSong?n("PlayBar"):t._e(),n("HomeLink"),n("div",{staticClass:"search-bar"},[n("i",{staticClass:"fa fa-search"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{type:"text",name:"",id:""},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),n("i",{staticClass:"fa fa-times",on:{click:function(e){return t.UPDATE({key:"searchValue",value:null,name:"search"})}}})]),n("div",{staticClass:"search-suggestions"},[0!==t.musicSearch.length?n("div",[n("div",{staticClass:"item-title"},[t._v("音乐相关")]),t._l(t.musicSearch,(function(e,r){return n("div",{key:r,staticClass:"suggetion-item",on:{click:function(n){return t.musicSearchCickHandle(e)}}},[t._v(t._s(e.name)+"-"+t._s(e.artists[0].name))])}))],2):t._e()]),n("div",{staticClass:"item-title"},[t._v("搜索历史")]),t.searchHistory?n("div",{staticClass:"searchHistory"},t._l(t.searchHistory,(function(e,r){return n("span",{key:r,on:{click:function(n){return t.UPDATE({key:"searchValue",value:e.name,name:"search"})}}},[t._v(t._s(e.name)+"-"+t._s(e.artists[0].name))])})),0):t._e()],1)},mt=[],pt={naem:"Search",components:{PlayBar:E,HomeLink:x},computed:{...Object(h["e"])(["err","currentSong","currentSongList"]),...Object(h["e"])("search",["searchHistory","musicSearch"]),searchValue:{get(){return this.$store.state.search.searchValue},set(t){this.UPDATE({key:"searchValue",value:t,name:"search"})}}},watch:{searchValue:function(t){t?setTimeout(()=>{t===this.searchValue&&this.axios.get("/search/suggest",{params:{keywords:t}}).then(t=>{t.data.result.songs?this.UPDATE({key:"musicSearch",value:t.data.result.songs.filter(t=>t.id>1e9),name:"search"}):this.UPDATE({key:"musicSearch",value:[],name:"search"})}).catch(t=>{this.actionUPDATE({key:"err",value:t})})},1e3):this.UPDATE({key:"musicSearch",value:[],name:"search"})}},methods:{...Object(h["d"])([""+d.UPDATE]),...Object(h["b"])({["action"+d.UPDATE]:""+d.UPDATE}),updateSearchData:function(){},musicSearchCickHandle:function(t){if(0!==this.searchHistory.length){let e=this.searchHistory.filter(e=>e.id!==t.id);e.push(t),this.UPDATE({key:"searchHistory",value:e,name:"search"})}else this.UPDATE({key:"searchHistory",value:[t],name:"search"});this.UPDATE({key:"currentSongListIndex",value:-1}),this.UPDATE({key:"currentSong",value:t});let e=this.currentSongList.filter(e=>!!e&&e.id!==t.id);this.UPDATE({key:"currentSongList",value:[...e,this.currentSong]})}}},yt=pt,ft=(n("dc68"),Object(L["a"])(yt,dt,mt,!1,null,"79613878",null)),vt=ft.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.songListDetail?n("div",{staticClass:"play-list"},[n("LoadingComp",{attrs:{show:t.showLoading}}),n("HomeLink"),n("PlayBar"),n("div",{staticClass:"header"},[n("div",{staticClass:"mask"}),t.songListDetail?n("img",{staticClass:"bg-img-filter",attrs:{src:t.songListDetail.coverImgUrl,alt:""}}):t._e(),n("div",{staticClass:"left"},[t.songListDetail?n("img",{attrs:{src:t.songListDetail.coverImgUrl,alt:""}}):t._e(),n("span",[n("i",{staticClass:"fa fa-headphones"}),t._v(" "+t._s(t.playCount)+" ")])]),n("div",{staticClass:"right"},[n("div",{staticClass:"list-name"},[t._v(t._s(t.songListDetail.name))]),t.songListDetail.subscribers?n("div",{staticClass:"list-artist-iniformation"},[n("img",{attrs:{src:t.songListDetail.subscribers[0].avatarUrl,alt:""}}),n("span",[t._v(t._s(t.songListDetail.creator.nickname))])]):t._e()])]),n("div",{staticClass:"content"},[n("div",{staticClass:"tag-bar"},[n("span",[t._v("标签:")]),t._l(t.songListDetail.tags,(function(e,r){return n("span",{key:r,staticClass:"tag"},[t._v(t._s(e))])}))],2),n("div",{staticClass:"list-introduce"},[t._v("简介:"+t._s(t.songListDetail.description))]),n("div",{staticClass:"item-tite"},[t._v("歌曲列表")]),n("ul",{staticClass:"song-item-inner-layout"},t._l(t.songListDetail.tracks,(function(t,e){return n("SongItem",{key:e,attrs:{number:e,songItem:t,showNumber:!0}})})),1)])],1):t._e()},Lt=[],Pt={name:"PlayList",components:{PlayBar:E,HomeLink:x,SongItem:b,LoadingComp:Y},methods:{...Object(h["d"])([""+d.UPDATE]),...Object(h["b"])({["action"+d.UPDATE]:""+d.UPDATE})},computed:{...Object(h["e"])(["err","showLoading","currentSong"]),...Object(h["e"])("playList",["songListDetail"]),...Object(h["c"])("playList",["playCount"])},beforeRouteEnter(t,e,n){Number(t.query.id)>=1e9?u.init("songListDetail",()=>{n(e=>{e.UPDATE({key:"songListDetail",value:u.parse("songListDetail",t.query.id),name:"playList"})})},()=>{Window.axios.get(g.playList.playListDetail,{params:{id:t.query.id}}).then(e=>{window.localStorage.setItem("songListDetail"+t.query.id,JSON.stringify({expire:Date.now()+6e5,data:e.data.playlist})),n(t=>{t.UPDATE({key:"songListDetail",value:e.data.playlist,name:"playList"})})}).catch(t=>{n(e=>{e.actionUPDATE({key:"err",value:t})})})},t.query.id):(alert("请输入正确网址进行导航"),n(!1))}},bt=Pt,Dt=(n("a65f"),Object(L["a"])(bt,St,Lt,!1,null,"2e0c666f",null)),kt=Dt.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currentLyric?n("div",{staticClass:"lyric",on:{click:function(e){return t.$router.push("control")}}},[n("LoadingComp"),n("BgFilter"),n("Guide"),n("div",{staticClass:"current-lyric-outer-layout"},[n("ul",{staticClass:"current-lyric-inner-layout",style:{transform:"translateY("+28*-t.currentLyricIndex+"px)"}},t._l(t.compileLlyrics,(function(e,r){return n("li",{key:r,class:{active:r===t.currentLyricIndex}},[t._v(t._s(e.text))])})),0)])],1):t._e()},Et=[],Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{staticClass:"bg-img-filter",attrs:{src:t.currentSongPicUrl,alt:""}})},At=[],Ct={computed:{...Object(h["c"])(["currentSongPicUrl"])}},_t=Ct,wt=(n("e3f6"),Object(L["a"])(_t,Tt,At,!1,null,"fc327d34",null)),xt=wt.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"guide",on:{click:function(e){return e.stopPropagation(),t.$router.push(t.prevPath)}}},[n("i",{staticClass:"fa fa-reply"})])},Ot=[],jt={computed:{...Object(h["e"])(["prevPath"])}},$t=jt,Nt=(n("c5327"),Object(L["a"])($t,It,Ot,!1,null,"6f4dfc3e",null)),Bt=Nt.exports,Ht={components:{Guide:Bt,BgFilter:xt,LoadingComp:Y},computed:{...Object(h["e"])(["currentSong","showLoading","currentSongList","currentSongListIndex","lyricPage"]),...Object(h["e"])("lyric",["currentLyricIndex","currentLyric","lyricShowTimeDiffer"]),...Object(h["c"])(["currentSongDuration"]),...Object(h["c"])("lyric",["compileLlyrics"])},methods:{...Object(h["d"])([d.UPDATE])},created(){u.init("currentLyric",()=>{this.UPDATE({key:"currentLyric",value:u.parse("currentLyric",""+this.currentSong.id),name:"lyric"})},()=>{this.UPDATE({key:"showLoading",value:"true"}),this.axios.get(`${g.lyric.lyric}?id=${this.currentSong.id}`).then(t=>{this.UPDATE({key:"showLoading",value:!1}),this.UPDATE({key:"currentLyric",value:t.data.lrc.lyric,name:"lyric"}),localStorage.setItem("currentLyric"+this.currentSong.id,JSON.stringify({expires:Date.now()+6e5,data:t.data.lrc.lyric}))}).catch(t=>{this.UPDATE({key:"err",value:t})})},""+this.currentSong.id)},watch:{currentSong:function(){this.UPDATE({key:"currentLyricIndex",value:0,name:"lyric"}),u.init("currentLyric",()=>{this.UPDATE({key:"currentLyric",value:u.parse("currentLyric",""+this.currentSong.id),name:"lyric"})},()=>{this.UPDATE({key:"showLoading",value:"true"}),this.axios.get(`${g.lyric.lyric}?id=${this.currentSong.id}`).then(t=>{this.UPDATE({key:"showLoading",value:!1}),this.UPDATE({key:"currentLyric",value:t.data.lrc.lyric,name:"lyric"}),localStorage.setItem("currentLyric"+this.currentSong.id,JSON.stringify({expires:Date.now()+6e5,data:t.data.lrc.lyric}))}).catch(t=>{this.UPDATE({key:"err",value:t})})},""+this.currentSong.id)}},beforeRouteEnter(t,e,n){n(t=>{"control"!==e.name?(t.UPDATE({key:"prevPath",value:e.fullPath}),t.UPDATE({key:"lyricPage",value:!0})):t.UPDATE({key:"lyricPage",value:!0});var n=t.$root.$el.querySelector("audio"),r=t.currentSongDuration;n.ontimeupdate=()=>{if(1e3*(n.currentTime+2)>=r&&(t.currentSongListIndex!==t.currentSongList.length-1?t.UPDATE({key:"currentSongListIndex",value:t.currentSongListIndex+1}):t.UPDATE({key:"currentSongListIndex",value:0}),t.UPDATE({key:"currentSong",value:t.currentSongList[t.currentSongListIndex]}),1===t.currentSongList.length&&t.UPDATE({key:"playing",value:!1})),0!==t.compileLlyrics.length)for(let e=0;e<t.compileLlyrics.length;e++)if(n.currentTime+t.lyricShowTimeDiffer<t.compileLlyrics[e].time){t.UPDATE({key:"currentLyricIndex",value:e-1,name:"lyric"});break}}})},beforeRouteLeave(t,e,n){var r=this.$root.$el.querySelector("audio");r.ontimeupdate=null,n()}},qt=Ht,zt=(n("1171"),Object(L["a"])(qt,Ut,Et,!1,null,"54a9b2f8",null)),Vt=zt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control",style:"backgrou-image:url("+t.currentSongPicUrl+")",on:{click:function(e){return t.$router.push({path:"lyric"})}}},[n("BgFilter"),n("Guide"),n("div",{staticClass:"needle"}),n("div",{staticClass:"black-adhesive",class:{active:t.playing}},[n("img",{attrs:{src:t.currentSongPicUrl,alt:""}})]),n("div",{staticClass:"controls"},[n("i",{staticClass:"fa fa-fast-backward",on:{click:function(e){return e.stopPropagation(),t.switchPrevSong(e)}}}),t.playing?n("i",{staticClass:"fa fa-pause",on:{click:function(e){return e.stopPropagation(),t.UPDATE({key:"playing",value:!t.playing})}}}):n("i",{staticClass:"fa fa-play",on:{click:function(e){return e.stopPropagation(),t.UPDATE({key:"playing",value:!t.playing})}}}),n("i",{staticClass:"fa fa-fast-forward",on:{click:function(e){return e.stopPropagation(),t.switchNextSong(e)}}})])],1)},Jt=[],Ft={components:{BgFilter:xt,Guide:Bt},computed:{...Object(h["e"])(["playing","err","currentSongList","currentSongListIndex","lyricPage"]),...Object(h["c"])(["currentSongPicUrl","currentSongDuration"])},beforeRouteEnter(t,e,n){console.log(e),"lyric"!==e.name?n(t=>{t.UPDATE({key:"prevPath",value:e.fullPath}),t.UPDATE({key:"lyricPage",value:!1})}):n(t=>{t.UPDATE({key:"lyricPage",value:!1})})},mounted(){var t=this.$root.$el.querySelector("audio");t.ontimeupdate=()=>{1e3*(t.currentTime+2)>=this.currentSongDuration&&(this.currentSongListIndex!==this.currentSongList.length-1?this.UPDATE({key:"currentSongListIndex",value:this.currentSongListIndex+1}):this.UPDATE({key:"currentSongListIndex",value:0}),this.UPDATE({key:"currentSong",value:this.currentSongList[this.currentSongListIndex]}),1===this.currentSongList.length&&this.UPDATE({key:"playing",value:!1}))}},methods:{...Object(h["d"])([d.UPDATE]),switchPrevSong:function(){this.currentSongListIndex>0?(this.UPDATE({key:"currentSongListIndex",value:this.currentSongListIndex-1}),this.UPDATE({key:"currentSong",value:this.currentSongList[this.currentSongListIndex]})):(this.UPDATE({key:"currentSongListIndex",value:this.currentSongList.length-1}),this.UPDATE({key:"currentSong",value:this.currentSongList[this.currentSongListIndex]}))},switchNextSong:function(){this.currentSongListIndex<this.currentSongList.length-1?(this.UPDATE({key:"currentSongListIndex",value:this.currentSongListIndex+1}),this.UPDATE({key:"currentSong",value:this.currentSongList[this.currentSongListIndex]})):(this.UPDATE({key:"currentSongListIndex",value:0}),this.UPDATE({key:"currentSong",value:this.currentSongList[this.currentSongListIndex]}))}}},Mt=Ft,Rt=(n("a65d"),Object(L["a"])(Mt,Xt,Jt,!1,null,"1eb4c8d8",null)),Gt=Rt.exports,Wt=[{path:"/",name:"Home",component:it},{path:"/lyric",name:"lyric",component:Vt},{path:"/control",name:"control",component:Gt},{path:"/hot",name:"Hot",component:ht},{path:"/search",name:"Search",component:vt},{path:"/playList",name:"PlayList",component:kt,meta:{requiresAuth:!0}}];r["a"].use(i["a"]);const Yt=new i["a"]({routes:Wt});var Kt=Yt,Qt={namespaced:!0,state:{showCurrentSongList:!1},mutations:{},getters:{},actions:{}},Zt={namespaced:!0,state:{currentLyric:"",currentLyricIndex:0,lyricShowTimeDiffer:.15},getters:{compileLlyrics:t=>t.currentLyric.split("\n").filter(t=>!isNaN(Number(t.substring(1,3)))).map(t=>{var e=t.substr(1,9),n=e.substr(0,2),r=e.substr(3,2);return{time:60*Number(n)+Number(r),text:t.substr(11)||"---------"}})},mutations:{},actions:{}},te={namespaced:!0,state:{songListDetail:{}},mutations:{},getters:{playCount:t=>t.songListDetail.playCount>=1e8?(t.songListDetail.playCount/1e8).toFixed(1)+"亿":(t.songListDetail.playCount/1e4).toFixed(1)+"万"},actions:{}},ee={namespaced:!0,state:{personalizeds:[],newsongs:[]},getters:{slicePersonalizeds:function(t){return t.personalizeds.slice(0,6)}},mutations:{},actions:{}},ne={namespaced:!0,state:{hotSongListDetail:[]},getters:{},mutations:{},actions:{}},re={namespaced:!0,state:{searchValue:null,searchHistory:[],musicSearch:[]},getters:{},mutations:{},actions:{}},se={namespaced:!0,state:{touchstartX:null,differX:150},mutations:{},getters:{},actions:{}},ae={playList:te,hot:ne,search:re,home:ee,playBar:Qt,lyric:Zt,app:se};r["a"].use(h["a"]);var ie=new h["a"].Store({state:{err:null,prevPath:"",lyricPage:!1,playing:!1,showLoading:!1,currentSong:{},currentSongList:[],currentSongListIndex:-1},getters:{currentSongUrl:t=>t.currentSong?`https://music.163.com/song/media/outer/url?id=${t.currentSong.id}.mp3`:null,currentSongPicUrl:t=>t.currentSong.picUrl?t.currentSong.picUrl:t.currentSong.al?t.currentSong.al.picUrl:t.currentSong.artists?t.currentSong.artists.img1v1Url||t.currentSong.artists[0].img1v1Url:"",currentSongArtists:t=>t.currentSong.song?t.currentSong.song.artists:t.currentSong.ar?t.currentSong.ar:t.currentSong.artists?t.currentSong.artists:[],currentSongDuration:t=>t.currentSong.song?t.currentSong.song.duration:t.currentSong.dt?t.currentSong.dt:t.currentSong.duration?t.currentSong.duration:0,compileLlyrics:t=>t.currentLyric?t.currentLyric.split("\n").map(t=>{var e=/\d{2}:\d{2}\.\d+/i;if(-1!==t.search(e)){var n=t.match(e)[0],r=n.substr(0,2),s=n.substr(3,2),a=n.substr(5);return{time:60*Number(r)+Number(s)+Number(a),text:t.substr(11)||"---------"}}return{}}):null},mutations:{[d.UPDATE](t,e){e.name?t[e.name][e.key]=e.value:t[e.key]=e.value}},actions:{[d.UPDATE]({commit:t},e){t(d.UPDATE,{n:e})}},modules:ae}),oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"},on:{touchstart:function(e){return e.stopPropagation(),t.touchstart(e)},touchend:function(e){return e.stopPropagation(),t.touchend(e)}}},[n("router-view"),n("audio",{attrs:{src:t.currentSongUrl,controls:"",height:"30",width:"100"}})],1)},ce=[],le={computed:{...Object(h["e"])(["playing","currentSong","audio"]),...Object(h["e"])("app",["touchstartX","differX"]),...Object(h["c"])(["currentSongUrl","currentSongDuration"])},watch:{playing:function(t){var e=this.$el.querySelector("audio");if(t){let t=setInterval(()=>{e.readyState&&(e.play(),clearInterval(t))},1e3)}else e.pause()},currentSong:function(){this.UPDATE({key:"playing",value:!0});var t=this.$el.querySelector("audio");if(this.playing){let e=setInterval(()=>{t.readyState&&(t.play(),clearInterval(e))},1e3)}else t.pause()}},methods:{...Object(h["d"])([d.UPDATE]),touchstart:function(t){this.UPDATE({key:"touchstartX",value:t.changedTouches[0].clientX,name:"app"})},touchend:function(t){t.changedTouches[0].clientX-this.touchstartX>this.differX?this.$router.back():t.changedTouches[0].clientX-this.touchstartX<-this.differX&&this.$router.forward()}}},ue=le,ge=(n("7c55"),Object(L["a"])(ue,oe,ce,!1,null,null,null)),he=ge.exports;r["a"].config.productionTip=!1,new r["a"]({router:Kt,store:ie,render:t=>t(he)}).$mount("#app")},"5b1d":function(t,e,n){"use strict";var r=n("4c30"),s=n.n(r);s.a},"5ba8":function(t,e,n){},"5df0":function(t,e,n){},6171:function(t,e,n){"use strict";var r=n("5df0"),s=n.n(r);s.a},"6dfa":function(t,e,n){},7339:function(t,e,n){},"7c55":function(t,e,n){"use strict";var r=n("5ba8"),s=n.n(r);s.a},"81d6":function(t,e,n){"use strict";var r=n("fc82"),s=n.n(r);s.a},"9cef":function(t,e,n){},a332:function(t,e,n){},a65d:function(t,e,n){"use strict";var r=n("acd1"),s=n.n(r);s.a},a65f:function(t,e,n){"use strict";var r=n("3c14"),s=n.n(r);s.a},ac5a:function(t,e,n){"use strict";var r=n("09bf"),s=n.n(r);s.a},acd1:function(t,e,n){},afd7:function(t,e,n){t.exports=n.p+"img/loading.b4c7c196.svg"},c49f:function(t,e,n){},c5327:function(t,e,n){"use strict";var r=n("9cef"),s=n.n(r);s.a},caca:function(t,e,n){"use strict";var r=n("6dfa"),s=n.n(r);s.a},d614:function(t,e,n){},dc68:function(t,e,n){"use strict";var r=n("e26a"),s=n.n(r);s.a},dc74:function(t,e,n){},dcb5:function(t,e,n){"use strict";var r=n("c49f"),s=n.n(r);s.a},e26a:function(t,e,n){},e3f6:function(t,e,n){"use strict";var r=n("a332"),s=n.n(r);s.a},f000:function(t,e,n){"use strict";var r=n("dc74"),s=n.n(r);s.a},fc82:function(t,e,n){}});
//# sourceMappingURL=app.7a741997.js.map